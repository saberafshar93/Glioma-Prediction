<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ovarian Cancer Prediction App</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            padding: 0;
        }
        .step {
            margin-bottom: 20px;
        }
        .form-group {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }
        .form-group label {
            width: 200px;
            text-align: right;
            margin-right: 10px;
        }
        .form-group input[type="text"], .form-group input[type="number"] {
            width: 150px;
            padding: 5px;
        }
        .form-group select {
            width: 160px;
            padding: 5px;
        }
        button {
            padding: 10px 20px;
            background-color: #4CAF50;
            color: white;
            border: none;
            cursor: pointer;
        }
        button:hover {
            background-color: #45a049;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        table, th, td {
            border: 1px solid black;
        }
        th, td {
            padding: 8px;
            text-align: center;
        }
        img {
            max-width: 100%;
            height: auto;
        }
    </style>
</head>
<body>

    <!-- STEP 0 -->
    <div class="step" id="step0" style="display: none;">
        <h2>Step 0: Download File</h2>
        <p>Download the Excel (CSV) file below, enter your patient's lab data into it, and save the file.</p>
        <a href="https://github.com/saberafshar93/Glioma-Prediction/blob/main/Data.csv" download>Download File</a>
        <button onclick="showStep(1)">Next</button>
    </div>

    <!-- STEP 1 -->
    <div class="step" id="step1" style="display: block;">
        <h2>Step 1: Enter Patient Data</h2>
        <form id="patientForm">
            <div class="form-group">
                <label for="name">Name:</label>
                <input type="text" id="name" name="name" required>
            </div>
            <div class="form-group">
                <label for="gender">Gender:</label>
                <select id="gender" name="gender" required>
                    <option value="0">Male</option>
                    <option value="1">Female</option>
                </select>
            </div>
            <div class="form-group">
                <label for="age">Age:</label>
                <input type="number" id="age" name="age" required>
            </div>
            <div class="form-group">
                <label for="idh1">IDH1:</label>
                <select id="idh1" name="idh1" required>
                    <option value="1">MUTATED</option>
                    <option value="0">NOT_MUTATED</option>
                </select>
                <label for="tp53">TP53:</label>
                <select id="tp53" name="tp53" required>
                    <option value="1">MUTATED</option>
                    <option value="0">NOT_MUTATED</option>
                </select>
            </div>
            <div class="form-group">
                <label for="atrx">ATRX:</label>
                <select id="atrx" name="atrx" required>
                    <option value="1">MUTATED</option>
                    <option value="0">NOT_MUTATED</option>
                </select>
                <label for="pten">PTEN:</label>
                <select id="pten" name="pten" required>
                    <option value="1">MUTATED</option>
                    <option value="0">NOT_MUTATED</option>
                </select>
            </div>
            <div class="form-group">
                <label for="egfr">EGFR:</label>
                <select id="egfr" name="egfr" required>
                    <option value="1">MUTATED</option>
                    <option value="0">NOT_MUTATED</option>
                </select>
                <label for="cic">CIC:</label>
                <select id="cic" name="cic" required>
                    <option value="1">MUTATED</option>
                    <option value="0">NOT_MUTATED</option>
                </select>
            </div>
            <div class="form-group">
                <label for="muc16">MUC16:</label>
                <select id="muc16" name="muc16" required>
                    <option value="1">MUTATED</option>
                    <option value="0">NOT_MUTATED</option>
                </select>
                <label for="pi3kca">PIK3CA:</label>
                <select id="pi3kca" name="pi3kca" required>
                    <option value="1">MUTATED</option>
                    <option value="0">NOT_MUTATED</option>
                </select>
            </div>
            <div class="form-group">
                <label for="nf1">NF1:</label>
                <select id="nf1" name="nf1" required>
                    <option value="1">MUTATED</option>
                    <option value="0">NOT_MUTATED</option>
                </select>
                <label for="pi3kr1">PIK3R1:</label>
                <select id="pi3kr1" name="pi3kr1" required>
                    <option value="1">MUTATED</option>
                    <option value="0">NOT_MUTATED</option>
                </select>
            </div>
            <div class="form-group">
                <label for="fubp1">FUBP1:</label>
                <select id="fubp1" name="fubp1" required>
                    <option value="1">MUTATED</option>
                    <option value="0">NOT_MUTATED</option>
                </select>
                <label for="rb1">RB1:</label>
                <select id="rb1" name="rb1" required>
                    <option value="1">MUTATED</option>
                    <option value="0">NOT_MUTATED</option>
                </select>
            </div>
            <div class="form-group">
                <label for="notch1">NOTCH1:</label>
                <select id="notch1" name="notch1" required>
                    <option value="1">MUTATED</option>
                    <option value="0">NOT_MUTATED</option>
                </select>
                <label for="bcor">BCOR:</label>
                <select id="bcor" name="bcor" required>
                    <option value="1">MUTATED</option>
                    <option value="0">NOT_MUTATED</option>
                </select>
            </div>
            <div class="form-group">
                <label for="csmd3">CSMD3:</label>
                <select id="csmd3" name="csmd3" required>
                    <option value="1">MUTATED</option>
                    <option value="0">NOT_MUTATED</option>
                </select>
                <label for="smarca4">SMARCA4:</label>
                <select id="smarca4" name="smarca4" required>
                    <option value="1">MUTATED</option>
                    <option value="0">NOT_MUTATED</option>
                </select>
            </div>
            <div class="form-group">
                <label for="grin2a">GRIN2A:</label>
                <select id="grin2a" name="grin2a" required>
                    <option value="1">MUTATED</option>
                    <option value="0">NOT_MUTATED</option>
                </select>
                <label for="idh2">IDH2:</label>
                <select id="idh2" name="idh2" required>
                    <option value="1">MUTATED</option>
                    <option value="0">NOT_MUTATED</option>
                </select>
            </div>
            <div class="form-group">
                <label for="fat4">FAT4:</label>
                <select id="fat4" name="fat4" required>
                    <option value="1">MUTATED</option>
                    <option value="0">NOT_MUTATED</option>
                </select>
                <label for="pdgfra">PDGFRA:</label>
                <select id="pdgfra" name="pdgfra" required>
                    <option value="1">MUTATED</option>
                    <option value="0">NOT_MUTATED</option>
                </select>
            </div>
            <button type="button" onclick="processData()">Next</button>
        </form>
    </div>

    <!-- STEP 2 -->
    <div class="step" id="step2" style="display: none;">
        <h2>Step 2: Review Data</h2>
        <table id="reviewTable">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Gender</th>
                    <th>Age</th>
                    <th>IDH1</th>
                    <th>TP53</th>
                    <th>ATRX</th>
                    <th>PTEN</th>
                    <th>EGFR</th>
                    <th>CIC</th>
                    <th>MUC16</th>
                    <th>PIK3CA</th>
                    <th>NF1</th>
                    <th>PIK3R1</th>
                    <th>FUBP1</th>
                    <th>RB1</th>
                    <th>NOTCH1</th>
                    <th>BCOR</th>
                    <th>CSMD3</th>
                    <th>SMARCA4</th>
                    <th>GRIN2A</th>
                    <th>IDH2</th>
                    <th>FAT4</th>
                    <th>PDGFRA</th>
                </tr>
            </thead>
            <tbody id="reviewTableBody"></tbody>
        </table>
        <button onclick="predictData()">Next</button>
    </div>

    <!-- STEP 3 -->
    <div class="step" id="step3" style="display: none;">
        <h2>Step 3: Results</h2>
        <p id="resultMessage"></p>
        <img src="" alt="Result Image" id="resultImage">
        <button onclick="resetApp()">New Patient</button>
        <button onclick="exitApp()">Exit</button>
    </div>

    <script>
        let formData = {};

        function showStep(step) {
            document.getElementById('step0').style.display = 'none';
            document.getElementById('step1').style.display = 'none';
            document.getElementById('step2').style.display = 'none';
            document.getElementById('step3').style.display = 'none';
            document.getElementById('step' + step).style.display = 'block';
        }

        function processData() {
            const form = document.getElementById('patientForm');
            formData = Object.fromEntries(new FormData(form).entries());
            formData['id'] = 0; // Set ID to 0 as per the dataset format.
            populateReviewTable();
            showStep(2);
        }

        function populateReviewTable() {
            const tbody = document.getElementById('reviewTableBody');
            tbody.innerHTML = '';
            const row = document.createElement('tr');
            for (const key in formData) {
                const cell = document.createElement('td');
                cell.textContent = formData[key];
                row.appendChild(cell);
            }
            tbody.appendChild(row);
        }

        function predictData() {
            // Simulate prediction using machine learning models.
            const resultMessage = document.getElementById('resultMessage');
            const resultImage = document.getElementById('resultImage');

            // Example predictions based on dummy logic.
            const randomPrediction = Math.random();
            if (randomPrediction > 0.5) {
                resultMessage.textContent = 'Predicted: LGG';
                resultImage.src = 'https://raw.githubusercontent.com/saberafshar93/Glioma-Prediction/refs/heads/main/Image%201.jpg';
            } else {
                resultMessage.textContent = 'Predicted: GBM';
                resultImage.src = 'https://raw.githubusercontent.com/saberafshar93/Glioma-Prediction/refs/heads/main/Image%202.jpg';
            }

            showStep(3);
        }

        function resetApp() {
            showStep(1);
            document.getElementById('patientForm').reset();
        }

        function exitApp() {
            window.close();
        }
    </script>

</body>
</html>